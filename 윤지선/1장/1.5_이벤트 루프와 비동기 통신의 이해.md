> 동기 방식과 비동기 방식
- **동기** : 직렬 방식. 무조건 응답을 받은 이후에야 비로소 다른 작업을 처리할 수 있다. 그동안 다른 모든 작업은 대기한다.
- **비동기** : 병렬 방식. 응답이 오건 말건 상관없이 다음 작업이 이루어진다. 한 번에 여러 작업이 실행될 수 있다.
<br>

# 1. 싱글 스레드 자바스크립트
- 자바스크립트는 싱글 스레드 언어이다. 즉, '동기식'으로 한 번에 하나의 작업만 처리할 수 있다.
- 비동기 함수를 선언하고 싶으면 async를 사용한다.

  > 프로세스와 스레드
  - **프로세스** : 프로그램을 구동해 프로그램의 상태가 메모리상에서 실행되는 작업 단위를 의미한다. 즉, 하나의 프로그램 실행은 하나의 프로세스를 가지고 그 프로세스 내부에서 모든 작업이 처리되는 것을 의미한다.
  - <mark>**스레드**</mark> : 프로세스보다 더 작은 실행 단위를 의미한다. 하나의 프로세스에는 여러 개의 스레드를 만들 수 있고, 스레드끼리는 메모리를 공유할 수 있어 여러 가지 작업을 동시에 수행할 수 있다.

<br>

# 2. 이벤트 루프
자바스크립트 런타임 외부에서 자바스크립트의 비동기 실행을 돕기 위해 만들어진 장치이다. *(자바스크립트 표준에는 없는 내용이다)*
> 호출 스택(call stack)과 이벤트 루프
- <mark>호출 스택</mark>은 자바스크립트에서 수행해야 할 코드나 함수를 순차적으로 담아두는 스택이다.
- <mark>이벤트 루프</mark>는 호출 스택이 비어 있는지 여부를 확인하는 작업이다.
- 이벤트 루프만의 단일 스레드 내부에서 이 호출 스택 내부에 수행해야 할 작업이 있는지 확인하고, 수행해야 할 코드가 있다면 자바스크립트 엔진을 이용해 실행한다.

<br>

# 3. 태스크 큐와 마이크로 태스크 큐
> 태스크 큐 : setTImeout, setInterval, setImmediate 등

실행해야 할 태스크의 집합(비동기 함수의 콜백 함수, 이벤트 핸들러 등)을 의미한다.

> 마이크로 태스크 큐 : process.nextTick, **Promises**, queueMicroTask, MutationObserver 등
 
기존 태스크 큐보다 <mark>우선권</mark>을 갖는다. 마이크로 태스크 큐가 빌 때까지는 기존 태스크 큐의 실행은 뒤로 미루어진다.

<br>

## 렌더링은 언제 실행될까?
- 각 마이크로 태스크 큐 작업이 끝날 때마다 한 번씩 렌더링할 기회를 얻게 된다.
- 따라서, 전체 코드를 실행하고, 호출 스택이 비었을 때 **마이크로태스크 큐 > 렌더링 > 태스크 큐** 순서로 작업을 수행한다.
- 동기 코드는 물론이고 마이크로 태스크 또한 마찬가지로 렌더링에 영향을 미칠 수 있다.

<br>

 # 정리
- 자바스크립트 코드 자체는 싱글 스레드로 이루어져서 동기 작업으로 처리되지만, **태스크 큐, 이벤트 루프, 마이크로 태스크 큐, 브라우저/Node.js API** 등이 적절한 생태계를 이루고 있기 때문에 비동기 이벤트 처리가 가능하다.
- 특정 렌더링이 자바스크립트 내 무거운 작업과 연관이 있다면 사용자 경험을 위해 이를 어떤 식으로 분리할 지 고민해 보아야 한다.
